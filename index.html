<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Core Builder 0.2</title>
  <script src="dist/bower.js"></script>
  <script src="dist/ace/ace.js"></script>
  <link rel="stylesheet" type="text/css" href="css/main.css">
</head>
<body>
 
  <div class="container" id="coreBuilder">

    <div class="row" id="header">

      <h1>CoreBuilder v 0.2</h1>
      
      <div id="sources" class="panel">
        <select class="sel-sources" multiple="multiple">
        </select>
          <span class="btn btn-primary btn-file" id="uploadCore">
            Load Core <input type="file">
        </span>
          <button type="button" class="btn btn-primary" id="downloadCore">
            Save Core
          </button>
          <ul class="nav nav-tabs pull-right" id="tabs">
            <li class="active"><a href="#cur_entry_wrapper" data-toggle="tab">Current Entry</a></li>
            <li><a href="#full" data-toggle="tab">Full Core</a></li>
          </ul>
      </div>
    
    </div>

    <div class="row" id="main">
      <div class="col-md-7 well">
        <!--<div class="alert alert-info"><span class="glyphicon glyphicon-arrow-up"></span> Pick a source to start selecting elements.</div>-->
        <div class="row" id="editors"> </div>
      </div>
      <div class="col-md-5 panel tab-content" id="corexml">
        <div class="tab-pane active" id="cur_entry_wrapper">
          <div class="panel-group" id="el_opts">
            <div class="panel panel-default" id="panel1">
              <div class="panel-heading">
                <h4 class="panel-title">
                  <a data-toggle="collapse" data-target="#collapseOne" 
                     class="collapsed" href="#">
                    Select stand-off elements
                  </a>

                </h4>
              </div>
              <div id="collapseOne" class="panel-collapse collapse">
                  <div class="panel-body">
                    <p class="alert alert-info">Click &#x2716; to disable an unwanted element</p>
                    <div class="dropdown">
                      <button class="btn btn-default dropdown-toggle" type="button" id="preset" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                        Choose preset
                        <span class="caret"></span>
                      </button>
                      <ul class="dropdown-menu" aria-labelledby="preset">
                        <li><a href="#">Apparatus entry (&lt;app>, &lt;rdg>)</a></li>
                        <li><a href="#">Links (&lt;linkGrp>, &lt;link>)</a></li>
                        <li><a href="#">Stand off poetry (&lt;lg>, &lt;l>)</a></li>
                      </ul>
                    </div>
                    <form role="form" class="space-above">
                      <div class="form-group">
                        <label for="wrapper">Wrapper</label>
                        <div class="input-group">
                          <div class="input-group-addon"><a class="plain remove on" href="#"></a></div>
                          <input type="text" class="form-control" id="wrapper"
                                 value="app">
                          <div class="input-group-addon">
                            <a data-toggle="collapse" data-target="#att-wrapper" 
                               class="plain collapsed" href="#">
                              @
                            </a>
                          </div>
                        </div>
                      </div>
                      <div id="att-wrapper" class="panel-collapse collapse">

                      </div>
                      <div class="form-group">
                        <label for="grp">Grouping element</label>
                        <div class="input-group">
                          <div class="input-group-addon"><a class="plain remove on" href="#"></a></div>
                          <input type="text" class="form-control" id="grp"
                               value="rdgGrp">
                          <div class="input-group-addon">
                            <a data-toggle="collapse" data-target="#att-grp" 
                               class="plain collapsed" href="#">
                              @
                            </a>
                          </div>
                        </div>
                      </div>
                      <div id="att-grp" class="panel-collapse collapse">
                      
                      </div>
                      <div class="form-group">
                        <label for="container">Container</label>
                        <div class="input-group">
                          <div class="input-group-addon"><a class="plain remove on " href="#"></a></div>
                          <input type="text" class="form-control" id="container"
                               value="rdg">
                          <div class="input-group-addon">
                            <a data-toggle="collapse" data-target="#att-container" 
                               class="plain collapsed" href="#">
                              @
                            </a>
                          </div>
                        </div>
                      </div>
                      <div id="att-container" class="panel-collapse collapse">
                        
                      </div>
                      <div class="form-group">
                        <label for="ptr">Pointer</label>
                        <div class="input-group">
                          <div class="input-group-addon"><a class="plain remove on" href="#"></a></div>
                          <input type="text" class="form-control" id="ptr"
                               value="ptr">
                          <div class="input-group-addon">
                            <a data-toggle="collapse" data-target="#att-ptr" 
                               class="plain" href="#">
                              @
                            </a>
                          </div>
                        </div>
                      </div>
                      <div id="att-ptr" class="panel-collapse collapse in">
                        
                      </div>
                    </form>
                    <button id="apply_els" class="btn btn-md pull-right">Apply</button>
                  </div>
              </div>
            </div>
          </div>
          <div id="cur_entry"></div>
        </div>
        <div class="tab-pane" id="full"></div>
    </div>
  </div>

  <!-- BACKBONE TEMPLATES -->
  <script type="text/template" id="editor-tpl">
  <div class="edit">
    <div>
      <div class="container-fluid">
        <div class="row"> 
          <div class="col-md-1 groupingView">

          </div>   
          <div class="col-md-5 src-title">
            <%=source%>
          </div>
          <div class="col-md-6 text-right">
            <button type="button" class="btn btn-default btn-md" data-toggle="button">
              <span class="glyphicon glyphicon-pencil"></span> Edit
            </button>
            <button type="button" class="btn btn-default btn-md">
              <span class="glyphicon glyphicon-cloud-upload"></span> Save to server
            </button>
          </div>
        </div>
      </div>
      
      <div id="ed_<%=source%>" class="editor"></div>
      <span class="label label-info">Selected Elements</span>
    </div>
    <div><button class="btn btn-xs btn-default pull-right add-empty">Add this source to the core as "empty"</button></div>
  </div>
  </script>

  <script type="text/template" id="grouping-tpl">
    <div class="btn-group pull-left">
      <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
        <span class="glyphicon glyphicon-magnet grouping"></span>&nbsp;<span class="caret"></span>
      </button>
      <ul class="dropdown-menu groupingmenu">
        <% if (start) { %>
          <li><a href="#" class="newGroup">Start new group</a></li>
          <% _.each(groups, function(g) { %>
            <li class='_group'><a href='#' data-group='<%=g%>'>Add to group <%=g%></a></li>
          <% }); %>
        <%} if (remove) { %>
          <li><a href="#" class="removeFromGroup">Remove from group</a></li>
        <%}%>
      </ul>
    </div>
  </script>

  <script type="text/template" id="selection-tpl">
    <%=ident%>[@xml:id='<%=xmlid%>']&nbsp;<button class="btn btn-xs btn-danger sel-remove">Ã—</button>
  </script>

  <script type="text/template" id="core-tpl">
      <pre class="sh_xml"><code class="language-markup"><%=xml_string%></code></pre>
      <div class="pull-right">
        <button type="button" id="entry_cancel" class="btn btn-danger">
          <span class="glyphicon glyphicon-trash"></span> Cancel
        </button>
        <ul class="dropdown-menu" role="menu" id="entry_group">
          <% _.each(sources, function(s) { %>  <li><a href="#" data-source="<%= s %>"><%= s %></a></li> <% }); %>
        </ul>
        <button type="button" id="entry_add" class="btn btn-success">
          <span class="glyphicon glyphicon-plus"></span> Add
        </button>
      </div>
  </script>

  <script type="text/template" id="atts-tpl">
    <div class="panel-default panel-att">
      <div class="form-group">
        <div id="<%=name%>"></div>
        <a href="#" class="add_att">add new attribute</a>
      </div>
    </div>
  </script>

  <script type="text/template" id="att-tpl">
    <div class="input-group" id="<%=id%>">
      <% if (target) {%>
        <div class="input-group-addon">@</div>
        <input type="text" class="form-control"
             value="<%=name%>">             
      <%} else {%>
        <div class="input-group-addon"><a class="plain rem_att" href="#" >&#x2716;</a></div>
        <div class="input-group-addon">@</div>
        <input type="text" class="form-control-static"
             value="<%=name%>"> 
        <input type="text" class="form-control-static"
             value="<%=value%>"> 
      <% } %>
    </div>
  </script>

  <script type="text/template" id="entry-tpl"><button type="button" class="close">&times;</button><code class="language-markup"><%=escaped_xml%></code></script>

  
  <script src="dist/coreBuilder.js"></script>
  <script src="dist/main.js"></script>

</body>
</html>